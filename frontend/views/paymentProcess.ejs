<%- include ("meta.ejs") %>
<body>

    <%- include ("navbar.ejs") %>
    <%- include ("navAdmin.ejs") %>

    <div class="ctn-login">

        <h1 class="f-sanserif-bold mt-5">PAYMENTS APPROVAL</h1>

        <div class="ctn-attendance">

            <p class="f-sanserif-regular mb-5"><span class="f-sanserif-medium">IMPORTANT NOTICE<br><br></span>
                Do take note that if payment is not approved within 1 day, Salary payment will<br>  
                still be automatically released to the users within the next day since the job has been completed.
            </p>
            
            <p class="f-sanserif-medium mt-3">Table information:</p>

            <div>
                <label for="massStatus">Change Status for Selected Rows: </label>
                <select id="massStatus" class="status-dropdown">
                    <option value="">Select Status</option>
                    <option value="Pending Payment">Pending Payment</option>
                    <option value="Release Payment">Release Payment</option>
                    <option value="Hold">Hold</option>
                </select>
            </div>

            <table id="paymentTable" class="table-styled mt-5 mb-5">
                <thead>
                    <tr>
                        <th>Select</th>
                        <th>S/N</th>
                        <th>Job ID</th>
                        <th>Crew ID</th>
                        <th>Name of Crew</th>
                        <th>Mobile No.</th>
                        <th>No. of Working Hours</th>
                        <th>Per Hourly / Monthly Rate</th>
                        <th>Total Payment, $</th>
                        <th>Approval Status</th>
                        <th>Payment Status</th>
                        <th>Remark</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="checkbox" class="row-select"></td>
                        <td class="serial-number"></td>
                        <td>SATS1980</td>
                        <td>JK349102OP</td>
                        <td>Lim Yan Ping</td>
                        <td>9300 4500</td>
                        <td>50</td>
                        <td>12</td>
                        <td>600</td>
                        <td>Proceed</td>
                        <td>
                            <select class="status-dropdown">
                                <option value="Pending Payment">Pending Payment</option>
                                <option value="Release Payment">Release Payment</option>
                                <option value="Hold">Hold</option>
                            </select>
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-select"></td>
                        <td class="serial-number"></td>
                        <td>SATS1980</td>
                        <td>JK349102OP</td>
                        <td>Lim Yan Ping</td>
                        <td>9300 4500</td>
                        <td>50</td>
                        <td>12</td>
                        <td>600</td>
                        <td>Proceed</td>
                        <td>
                            <select class="status-dropdown">
                                <option value="Pending Payment">Pending Payment</option>
                                <option value="Release Payment">Release Payment</option>
                                <option value="Hold">Hold</option>
                            </select>
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-select"></td>
                        <td class="serial-number"></td>
                        <td>SATS1980</td>
                        <td>JK349102OP</td>
                        <td>Lim Yan Ping</td>
                        <td>9300 4500</td>
                        <td>50</td>
                        <td>12</td>
                        <td>600</td>
                        <td>Proceed</td>
                        <td>
                            <select class="status-dropdown">
                                <option value="Pending Payment">Pending Payment</option>
                                <option value="Release Payment">Release Payment</option>
                                <option value="Hold">Hold</option>
                            </select>
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-select"></td>
                        <td class="serial-number"></td>
                        <td>SATS1980</td>
                        <td>JK349102OP</td>
                        <td>Lim Yan Ping</td>
                        <td>9300 4500</td>
                        <td>50</td>
                        <td>12</td>
                        <td>600</td>
                        <td>Proceed</td>
                        <td>
                            <select class="status-dropdown">
                                <option value="Pending Payment">Pending Payment</option>
                                <option value="Release Payment">Release Payment</option>
                                <option value="Hold">Hold</option>
                            </select>
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-select"></td>
                        <td class="serial-number"></td>
                        <td>SATS1980</td>
                        <td>JK349102OP</td>
                        <td>Lim Yan Ping</td>
                        <td>9300 4500</td>
                        <td>50</td>
                        <td>12</td>
                        <td>600</td>
                        <td>Proceed</td>
                        <td>
                            <select class="status-dropdown">
                                <option value="Pending Payment">Pending Payment</option>
                                <option value="Release Payment">Release Payment</option>
                                <option value="Hold">Hold</option>
                            </select>
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-select"></td>
                        <td class="serial-number"></td>
                        <td>SATS1980</td>
                        <td>JK349102OP</td>
                        <td>Lim Yan Ping</td>
                        <td>9300 4500</td>
                        <td>50</td>
                        <td>12</td>
                        <td>600</td>
                        <td>Proceed</td>
                        <td>
                            <select class="status-dropdown">
                                <option value="Pending Payment">Pending Payment</option>
                                <option value="Release Payment">Release Payment</option>
                                <option value="Hold">Hold</option>
                            </select>
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-select"></td>
                        <td class="serial-number"></td>
                        <td>SATS1980</td>
                        <td>JK349102OP</td>
                        <td>Lim Yan Ping</td>
                        <td>9300 4500</td>
                        <td>50</td>
                        <td>12</td>
                        <td>600</td>
                        <td>Proceed</td>
                        <td>
                            <select class="status-dropdown">
                                <option value="Pending Payment">Pending Payment</option>
                                <option value="Release Payment">Release Payment</option>
                                <option value="Hold">Hold</option>
                            </select>
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-select"></td>
                        <td class="serial-number"></td>
                        <td>SATS1980</td>
                        <td>JK349102OP</td>
                        <td>Lim Yan Ping</td>
                        <td>9300 4500</td>
                        <td>50</td>
                        <td>12</td>
                        <td>600</td>
                        <td>Proceed</td>
                        <td>
                            <select class="status-dropdown">
                                <option value="Pending Payment">Pending Payment</option>
                                <option value="Release Payment">Release Payment</option>
                                <option value="Hold">Hold</option>
                            </select>
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-select"></td>
                        <td class="serial-number"></td>
                        <td>SATS1980</td>
                        <td>JK349102OP</td>
                        <td>Lim Yan Ping</td>
                        <td>9300 4500</td>
                        <td>50</td>
                        <td>12</td>
                        <td>600</td>
                        <td>Proceed</td>
                        <td>
                            <select class="status-dropdown">
                                <option value="Pending Payment">Pending Payment</option>
                                <option value="Release Payment">Release Payment</option>
                                <option value="Hold">Hold</option>
                            </select>
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-select"></td>
                        <td class="serial-number"></td>
                        <td>SATS1980</td>
                        <td>JK349102OP</td>
                        <td>Lim Yan Ping</td>
                        <td>9300 4500</td>
                        <td>50</td>
                        <td>12</td>
                        <td>600</td>
                        <td>Proceed</td>
                        <td>
                            <select class="status-dropdown">
                                <option value="Pending Payment">Pending Payment</option>
                                <option value="Release Payment">Release Payment</option>
                                <option value="Hold">Hold</option>
                            </select>
                        </td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <button id="applyStatusButton" class="button-apply2">Apply Changes to all Selected Rows</button>
            <button id="submitApprovalButton" class="button-approval">Submit Payment Approval</button>
            
        </div>
    </div>

    <%- include ("footer.ejs") %>

    <script>
        function applyStatusToSelectedRows() {
            const selectedStatus = document.getElementById('massStatus').value;
            console.log("Selected status to apply:", selectedStatus);

            if (!selectedStatus) {
                alert("Please select a status to apply.");
                return;
            }

            const checkboxes = document.querySelectorAll('.row-select:checked');
            console.log("Number of selected rows:", checkboxes.length);

            checkboxes.forEach(checkbox => {
                const row = checkbox.closest('tr');
                const statusDropdown = row.querySelector('.status-dropdown');
                console.log("Changing status for row:", row);
                statusDropdown.value = selectedStatus;
            });
        }

        function updateSerialNumbers() {
            const rows = document.querySelectorAll('#paymentTable tbody tr');
            rows.forEach((row, index) => {
                row.querySelector('.serial-number').textContent = index + 1;
            });
        }

        document.getElementById('applyStatusButton').addEventListener('click', applyStatusToSelectedRows);

        document.addEventListener('DOMContentLoaded', updateSerialNumbers);
    </script>


</body>
</html>